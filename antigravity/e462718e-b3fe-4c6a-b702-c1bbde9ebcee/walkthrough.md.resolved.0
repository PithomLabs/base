# Walkthrough - Enforce Memo for Ticket Creation

I have implemented the validation rule requiring tickets to have a memo description.

## Changes

### Backend
**File**: [store/ticket.go](file:///home/chaschel/Documents/ibm/go/tix-gemini-master/store/ticket.go)
- Added validation logic in [Validate()](file:///home/chaschel/Documents/ibm/go/tix-gemini-master/store/ticket.go#60-75):
```go
	if len(t.Description) < 3 || t.Description[:3] != "/m/" {
		return errors.New("description must be a valid memo link starting with /m/")
	}
```

### Frontend
**File**: [web/src/pages/Tickets.tsx](file:///home/chaschel/Documents/ibm/go/tix-gemini-master/web/src/pages/Tickets.tsx)
- Added pre-submission check in [handleCreateOrUpdate](file:///home/chaschel/Documents/ibm/go/tix-gemini-master/web/src/pages/Tickets.tsx#148-210):
```typescript
        // Validate that description is a valid memo link
        // We use the helper isMemoLink to check
        let checkingDesc = description;
        if (editingTicket) {
            checkingDesc = editingTicket.description;
        }
        if (!isMemoLink(checkingDesc)) {
            toast.error("A memo description is required. Please use 'Add description (Create Memo)' to link a memo.");
            return;
        }
```

## Verification Results

### Automated Tests
Ran `go test -v -run TestTicketStore ./store/test/...`
```
=== RUN   TestTicketStore
    store.go:98: failed to load .env file, but it's ok
2025/12/22 02:26:34 WARN failed to find migration history in pre-migrate error="SQL logic error: no such table: migration_history (1)"
--- PASS: TestTicketStore (0.07s)
PASS
ok      github.com/usememos/memos/store/test    0.076s
```
The test passed, confirming that:
1. Valid descriptions starting with `/m/` are accepted.
2. Invalid descriptions are rejected (verified by the new `require.Error` check I added to the test).
